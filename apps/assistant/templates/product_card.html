{% for product in products %}
    <div class="product-card">
        <div class="product-header">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="product-logo" alt="{{ product.name }}"
                     title="–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –±–æ–π–∫–æ—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤">
            {% else %}
                <img src="/api/placeholder/50/50" class="product-logo" alt="{{ product.name }}">
            {% endif %}
            <div class="product-title">
                <div class="product-name">{{ product.name }}</div>
                <div class="product-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ product.category.name }}</div>
            </div>
            <div class="product-rating">
                <span class="rating-star">‚òÖ</span> {{ product.get_rating }}
            </div>
        </div>
        <div class="product-body">
            <div class="product-status {% if product.is_boycotted %}status-boycotted{% else %}status-ok{% endif %}">
                {% if product.is_boycotted %}–ë–æ–π–∫–æ—Ç–∏—Ä—É–µ—Ç—Å—è{% else %}–≠—Ç–∏—á–Ω—ã–π –≤—ã–±–æ—Ä{% endif %}
            </div>
            {% if product.boycott_reason %}
                <div class="product-reason"><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> {{ product.boycott_reason.title }}</div>
            {% endif %}
            <div class="product-description">
                {{ product.description }}
            </div>

            {% if product.alternative_products.exists %}
                <div class="alternatives-title">–≠—Ç–∏—á–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:</div>
                <div class="alternatives-list">
                    {% for alt in product.alternative_products.all %}
                        <div class="alternative-item"
                             onclick="showAlternativeModal(
                                     '{{ alt.name }}',
                                     '{{ alt.image.url }}',
                                     '{{ alt.get_rating }}',
                                     '{{ alt.is_kyrgyz_product }}',
                                     '{{ alt.category.name }}',
                                     '{{ alt.description }}',
                                     '{{ alt.is_boycotted }}',
                                     '{{ alt.boycott_reason.title }}')">

                            {% if alt.image %}
                                <img src="{{ alt.image.url }}" class="alternative-image" alt="{{ alt.name }}">
                            {% else %}
                                <img src="/api/placeholder/120/80" class="alternative-image" alt="{{ alt.name }}">
                            {% endif %}
                            <div class="alternative-info">
                                <div class="alternative-name">{{ alt.name }}</div>
                                <div class="alternative-rating">
                                    <span class="rating-star">‚òÖ</span> {{ alt.get_rating }}
                                    {% if alt.is_kyrgyz_product %}
                                        <div class="status-local" style="margin-left: 5px; font-size: 10px;">KG</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
{% endfor %}

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ -->
<div id="alternative-modal">
    <div class="modal-container">
        <button class="modal-close-btn" onclick="closeModal()">‚úï</button>

        <div class="modal-header">
            <img id="modal-alt-image" alt="–ü—Ä–æ–¥—É–∫—Ç" class="modal-product-image">

            <div class="modal-product-info">
                <div class="modal-product-title">
                    <h3 id="modal-alt-name" class="modal-product-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞</h3>
                </div>

                <div class="modal-product-meta">
                    <div class="modal-rating">
                        <span class="rating-star">‚òÖ</span>
                        <span id="modal-alt-rating">4.5</span>
                    </div>

                    <div class="modal-country" id="modal-alt-country-badge">
                        <span id="modal-alt-country">–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω</span>
                    </div>
                </div>

                <div class="modal-category">
                    –ö–∞—Ç–µ–≥–æ—Ä–∏—è: <span id="modal-alt-category">–ù–∞–ø–∏—Ç–∫–∏</span>
                </div>

                <div class="modal-status-container">
                    <div id="modal-alt-status-badge" class="modal-status ethical">
                        <span id="modal-alt-status">–≠—Ç–∏—á–Ω—ã–π –≤—ã–±–æ—Ä</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-body">
            <div class="modal-section">
                <div class="modal-section-title">–û –ø—Ä–æ–¥—É–∫—Ç–µ</div>
                <div id="modal-alt-description" class="modal-description">
                    –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å...
                </div>

                <div id="modal-alt-reason-container" class="modal-reason modal-reason-hidden">
                    <strong>–ü—Ä–∏—á–∏–Ω–∞ –±–æ–π–∫–æ—Ç–∞:</strong> <span id="modal-alt-reason">‚Äî</span>
                </div>
            </div>
        </div>

        <div class="modal-footer">
            <button class="modal-btn modal-btn-close" onclick="closeModal()">
                <span class="modal-btn-icon">‚Üê</span> –ó–∞–∫—Ä—ã—Ç—å
            </button>

            <button class="modal-btn modal-btn-search" onclick="searchAlternative()">
                <span class="modal-btn-icon">üîç</span> –ù–∞–π—Ç–∏
            </button>
        </div>
    </div>
</div>
